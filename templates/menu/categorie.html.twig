{% extends 'base.html.twig' %}

{% block title %}Catégories{% endblock %}

{% block body %}

{% block stylesheets %}	
    {# <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet"> #}

<link rel="stylesheet" href="{{ asset('css/style.css')}}">
	
		<style>
			#plats-container {
				transition: opacity 0.5s ease-in-out;
				opacity: 0;
				max-height: 0;
				overflow: hidden;

			}

			#plats-container.show {
				opacity: 1;
		max-height: 900px;

    align-items: center;
  
			}


.card {
    top: 40vh;
    margin-bottom: 20vh;
    height: auto;
    border-image: linear-gradient(#000000, #4d9f0c) 30;
    transition: transform 0.5s ease;
    cursor: pointer;
    background-color: transparent;
    border: none;
    z-index: auto;
    

   
}


.button {
  display: flex;
  justify-content: center;
}

.btn-link {
  background-color: transparent;
  border: 2px solid white;
  color: white;
  cursor: pointer;
  text-decoration: none;
  text-align: center;
  text-transform: uppercase;

}


.btn-link:hover {
  color: black;
  background-color: white;
}


.img-card {
  max-height: 300px;


}

.description {
  border: 2px solid rgb(179, 166, 166);
  border-radius: 4px;
}
		</style>


{% endblock %}


<main class="main-content">	


	<div class="container-fluid">
		<div class="row">
			<ul class="accordion-group" id="accordion">
				{% for categorie in categories %}
					<li>
						<a href="#" class="categorie-link" data-categorie-id="{{ categorie.id }}">
							<img src="{{ asset(categorie.image) }}" class="categorie-image">
							<div class="accordion-overlay cards">
								<h2>{{ categorie.libelle | upper }}</h2>
<button class="btn-success p-1 align-items-end">Plats</button>

							</div>
							
						</a>
					</li>
				{% endfor %}
			</ul>
		</div>
	</div>



<div id="plats-container">
<div class='col-12 mt-5 mb-5'>



</div>
</div>
</main>    
	{% block javascripts %}
<script>
document.addEventListener('DOMContentLoaded', function () {
const links = document.querySelectorAll('.categorie-link');
const platsContainer = document.getElementById('plats-container');

links.forEach(link => {
link.addEventListener('click', function (event) {
event.preventDefault();
const categorieId = this.getAttribute('data-categorie-id');
fetchPlats(categorieId);
});
});

function fetchPlats(categorieId) {
fetch (`/get-plats-by-categorie/${categorieId}`).then(response => response.json()).then(data => {
platsContainer.innerHTML = '';
data.plats.forEach(plat => {
const platElement = document.createElement('div');
  platElement.innerHTML = `
      <div class="card">
	     <div class="card-body"><img class='img-card' src='${plat.image}'>
	    	 <h5 class="card-title">${plat.name}</h5>
		     <p class="card-text">${plat.description}</p>
<h5>${plat.prix}€</h5>
<div class='button'>
	<button class='btn-primary'>Ajouter au Panier
<a href="{{ path('app_cart') }}"></button></a>


	   </div>
      </div>
   `;

platsContainer.appendChild(platElement);
});
platsContainer.classList.add('show');
}).catch(error => console.error('Error fetching plats:', error));
}
});
		</script>

<script src="js/accordions.js"></script> 
{# <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script> #}
{% endblock %}

	{% endblock %}



